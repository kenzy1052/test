<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EduHub - Online Examination Platform</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      :root {
        --primary-color: #6366f1;
        --secondary-color: #818cf8;
        --accent-color: #a5b4fc;
        --success-color: #10b981;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --light-color: #f8fafc;
        --dark-color: #1e293b;
        --text-primary: #0f172a;
        --text-secondary: #64748b;
        --border-color: #e2e8f0;
        --bg-primary: #ffffff;
        --bg-secondary: #f1f5f9;
        --bg-tertiary: #f8fafc;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --glass-bg: rgba(255, 255, 255, 0.7);
        --glass-border: rgba(255, 255, 255, 0.3);
      }

      body {
        background: linear-gradient(
          135deg,
          #f8fafc 0%,
          #e2e8f0 50%,
          #f1f5f9 100%
        );
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(129, 140, 248, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(165, 180, 252, 0.05) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: -1;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        width: 100%;
      }

      header {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.9),
          rgba(129, 140, 248, 0.9)
        );
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        color: white;
        padding: 25px 0;
        text-align: center;
        box-shadow: var(--shadow-2xl);
        position: relative;
        overflow: hidden;
        border-bottom: 1px solid var(--glass-border);
      }

      header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
      }

      header::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: rotate 30s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      header > * {
        position: relative;
        z-index: 1;
      }

      .logo {
        font-size: 2.8rem;
        font-weight: 800;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .logo i {
        animation: pulse 2s infinite;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }

      @keyframes pulse {
        0% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.1) rotate(5deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }

      .tagline {
        font-size: 1.3rem;
        opacity: 0.95;
        font-weight: 300;
        letter-spacing: 0.5px;
      }

      .card {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        box-shadow: var(--shadow-xl);
        padding: 35px;
        margin: 35px 0;
        transition: var(--transition);
        border: 1px solid var(--glass-border);
        position: relative;
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(99, 102, 241, 0.5),
          transparent
        );
      }

      .card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-2xl);
        border-color: var(--accent-color);
      }

      .card:hover::before {
        height: 2px;
      }

      .btn {
        display: inline-block;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        padding: 16px 32px;
        border: none;
        border-radius: 16px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 700;
        text-align: center;
        transition: var(--transition);
        text-decoration: none;
        position: relative;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
        letter-spacing: 0.5px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.6s;
      }

      .btn::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:hover::after {
        width: 300px;
        height: 300px;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-2xl);
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--accent-color)
        );
      }

      .btn:active {
        transform: translateY(-1px);
      }

      .btn-success {
        background: linear-gradient(135deg, var(--success-color), #059669);
      }

      .btn-success:hover {
        background: linear-gradient(135deg, #059669, #047857);
      }

      .btn-danger {
        background: linear-gradient(135deg, var(--danger-color), #dc2626);
      }

      .btn-danger:hover {
        background: linear-gradient(135deg, #dc2626, #b91c1c);
      }

      .timer {
        position: fixed;
        top: 20px;
        right: 20px;
        font-size: 1.3rem;
        font-weight: 800;
        color: var(--text-primary);
        text-align: center;
        padding: 15px 25px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        box-shadow: var(--shadow-2xl);
        border: 1px solid var(--glass-border);
        z-index: 1000;
        transition: var(--transition);
      }

      .timer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 20px;
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.1),
          rgba(129, 140, 248, 0.1)
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .timer:hover::before {
        opacity: 1;
      }

      .timer > * {
        position: relative;
        z-index: 1;
      }

      .timer.warning {
        color: var(--warning-color);
        border-color: var(--warning-color);
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.1),
          rgba(251, 191, 36, 0.1)
        );
        animation: pulse-warning 2s infinite;
      }

      .timer.danger {
        color: var(--danger-color);
        border-color: var(--danger-color);
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.1),
          rgba(248, 113, 113, 0.1)
        );
        animation: pulse-danger 1s infinite;
      }

      @keyframes pulse-warning {
        0%,
        100% {
          box-shadow: var(--shadow-2xl);
          transform: scale(1);
        }
        50% {
          box-shadow: 0 0 30px rgba(245, 158, 11, 0.6);
          transform: scale(1.05);
        }
      }

      @keyframes pulse-danger {
        0%,
        100% {
          box-shadow: var(--shadow-2xl);
          transform: scale(1);
        }
        50% {
          box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
          transform: scale(1.05);
        }
      }

      .question-card {
        margin-bottom: 35px;
        padding: 28px;
        border-left: 4px solid var(--primary-color);
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        transition: var(--transition);
        border: 1px solid var(--glass-border);
        position: relative;
        overflow: hidden;
      }

      .question-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s ease;
      }

      .question-card::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
          rgba(99, 102, 241, 0.1) 0%,
          transparent 50%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .question-card:hover::before {
        transform: scaleX(1);
      }

      .question-card:hover::after {
        opacity: 1;
      }

      .question-card:hover {
        background: var(--bg-secondary);
        border-color: var(--accent-color);
        transform: translateX(6px);
        box-shadow: var(--shadow-2xl);
      }

      .question-number {
        font-weight: 800;
        color: var(--primary-color);
        margin-bottom: 12px;
        font-size: 1.1rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .question-text {
        font-size: 1.2rem;
        margin-bottom: 18px;
        line-height: 1.7;
        color: var(--text-primary);
        font-weight: 500;
      }

      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 18px;
      }

      .option {
        padding: 18px;
        border: 2px solid var(--border-color);
        border-radius: 16px;
        cursor: pointer;
        transition: var(--transition);
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .option::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        opacity: 0.1;
        transition: width 0.4s ease;
      }

      .option::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
          rgba(99, 102, 241, 0.1) 0%,
          transparent 50%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .option:hover::before {
        width: 100%;
      }

      .option:hover::after {
        opacity: 1;
      }

      .option:hover {
        border-color: var(--primary-color);
        background: var(--bg-secondary);
        transform: translateY(-3px);
        box-shadow: var(--shadow-xl);
      }

      .option.selected {
        border-color: var(--primary-color);
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.15),
          rgba(129, 140, 248, 0.15)
        );
        font-weight: 700;
        box-shadow: var(--shadow-xl);
        transform: translateY(-2px);
      }

      .option.selected::before {
        width: 100%;
      }

      .option input[type="radio"] {
        margin-right: 12px;
        accent-color: var(--primary-color);
        transform: scale(1.2);
      }

      .progress-container {
        margin: 25px 0;
        padding: 25px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-lg);
      }

      .progress-bar {
        height: 16px;
        background: var(--bg-secondary);
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        width: 0%;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border-radius: 10px;
      }

      .progress::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .section-title {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--text-primary);
        margin: 50px 0 25px;
        padding-bottom: 18px;
        border-bottom: 3px solid var(--border-color);
        position: relative;
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      .section-title::before {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 0;
        width: 80px;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 2px;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 80px;
        width: calc(100% - 80px);
        height: 3px;
        background: linear-gradient(90deg, var(--secondary-color), transparent);
        border-radius: 2px;
        opacity: 0.5;
      }

      .hidden {
        display: none;
      }

      .result-card {
        text-align: center;
        padding: 50px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 24px;
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-2xl);
      }

      .score {
        font-size: 3.5rem;
        font-weight: 900;
        color: var(--primary-color);
        margin: 25px 0;
        text-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
      }

      .score-message {
        font-size: 1.6rem;
        margin-bottom: 35px;
        color: var(--text-secondary);
        font-weight: 500;
      }

      /* Animated Score Overlay */
      .score-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .score-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .score-circle-container {
        position: relative;
        width: 350px;
        height: 350px;
        transform: scale(0);
        transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      .score-overlay.active .score-circle-container {
        transform: scale(1);
      }

      .score-circle {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: var(--glass-bg);
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        box-shadow: var(--shadow-2xl), inset 0 0 50px rgba(99, 102, 241, 0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        border: 2px solid var(--glass-border);
      }

      .score-circle::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: conic-gradient(
          var(--primary-color) 0deg,
          var(--secondary-color) var(--percentage),
          transparent var(--percentage)
        );
        transition: all 3s cubic-bezier(0.4, 0, 0.2, 1);
        transform: rotate(-90deg);
        filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.5));
      }

      .score-circle.animate::before {
        background: conic-gradient(
          var(--primary-color) 0deg,
          var(--secondary-color) calc(var(--percentage) * 3.6deg),
          transparent calc(var(--percentage) * 3.6deg)
        );
      }

      .score-circle::after {
        content: "";
        position: absolute;
        top: 20px;
        left: 20px;
        right: 20px;
        bottom: 20px;
        border-radius: 50%;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
      }

      .score-circle-content {
        position: relative;
        z-index: 1;
        text-align: center;
        padding: 20px;
      }

      .score-percentage {
        font-size: 4rem;
        font-weight: 900;
        color: var(--primary-color);
        line-height: 1;
        margin-bottom: 15px;
        text-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
      }

      .score-label {
        font-size: 1.4rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      .score-fraction {
        font-size: 1.8rem;
        color: var(--text-primary);
        margin-top: 15px;
        font-weight: 700;
      }

      .confetti {
        position: absolute;
        width: 12px;
        height: 12px;
        background: var(--primary-color);
        opacity: 0;
        border-radius: 50%;
      }

      @keyframes confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg) scale(0);
          opacity: 0;
        }
      }

      .welcome-screen {
        text-align: center;
        background: linear-gradient(
          135deg,
          var(--glass-bg),
          var(--bg-secondary)
        );
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
      }

      .welcome-screen h1 {
        font-size: 3.5rem;
        font-weight: 900;
        color: var(--text-primary);
        margin-bottom: 25px;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 2px 20px rgba(99, 102, 241, 0.3);
      }

      .welcome-screen p {
        font-size: 1.3rem;
        margin-bottom: 35px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        color: var(--text-secondary);
        line-height: 1.8;
        font-weight: 500;
      }

      .instructions {
        text-align: left;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 28px;
        border-radius: 20px;
        margin: 25px 0;
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-lg);
      }

      .instructions h3 {
        color: var(--primary-color);
        margin-bottom: 18px;
        font-size: 1.4rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .instructions ul {
        padding-left: 25px;
      }

      .instructions li {
        margin-bottom: 15px;
        color: var(--text-secondary);
        line-height: 1.7;
        font-weight: 500;
      }

      .exam-info {
        display: flex;
        justify-content: space-around;
        margin: 40px 0;
        flex-wrap: wrap;
        gap: 25px;
      }

      .info-item {
        text-align: center;
        padding: 25px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-lg);
        min-width: 180px;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .info-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s ease;
      }

      .info-item:hover::before {
        transform: scaleX(1);
      }

      .info-item:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-2xl);
        border-color: var(--accent-color);
      }

      .info-value {
        font-size: 3rem;
        font-weight: 900;
        color: var(--primary-color);
        margin-bottom: 8px;
        text-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
      }

      .info-label {
        font-size: 1.1rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      footer {
        background: linear-gradient(135deg, var(--text-primary), #334155);
        color: white;
        text-align: center;
        padding: 40px 0;
        margin-top: auto;
        border-top: 1px solid var(--glass-border);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      footer p {
        font-size: 1.1rem;
        opacity: 0.9;
        font-weight: 500;
      }

      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .card {
          padding: 25px;
          margin: 25px 0;
        }

        .options {
          grid-template-columns: 1fr;
        }

        .exam-info {
          flex-direction: column;
          align-items: center;
        }

        .info-item {
          width: 100%;
          max-width: 250px;
        }

        .timer {
          top: 10px;
          right: 10px;
          padding: 12px 18px;
          font-size: 1.1rem;
        }

        .welcome-screen h1 {
          font-size: 2.8rem;
        }

        .section-title {
          font-size: 2rem;
        }

        .score-circle-container {
          width: 280px;
          height: 280px;
        }

        .score-percentage {
          font-size: 3.2rem;
        }

        .question-card {
          padding: 20px;
          margin-bottom: 25px;
        }

        .question-text {
          font-size: 1.1rem;
        }

        .option {
          padding: 15px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="logo">
          <i class="fas fa-graduation-cap"></i>
          EduHub
        </div>
        <div class="tagline">Excellence in Education</div>
      </div>
    </header>

    <main class="container">
      <!-- Welcome Screen -->
      <div id="welcome-screen" class="card welcome-screen">
        <h1>Welcome to EduHub Online Examination</h1>
        <p>
          You are about to take a comprehensive examination covering Science,
          Mathematics, and English. Please read the instructions carefully
          before starting.
        </p>

        <div class="exam-info">
          <div class="info-item">
            <div class="info-value">20</div>
            <div class="info-label">Questions</div>
          </div>
          <div class="info-item">
            <div class="info-value">30</div>
            <div class="info-label">Minutes</div>
          </div>
          <div class="info-item">
            <div class="info-value">3</div>
            <div class="info-label">Subjects</div>
          </div>
        </div>

        <div class="instructions">
          <h3>Examination Instructions</h3>
          <ul>
            <li>
              The exam consists of 20 questions (18 Multiple Choice and 2
              True/False)
            </li>
            <li>You have 30 minutes to complete the exam</li>
            <li>
              The timer will continue even if you refresh the page or leave and
              come back
            </li>
            <li>
              When time runs out, your exam will be automatically submitted
            </li>
            <li>Select one answer for each question</li>
            <li>After submission, you will only see your final score</li>
            <li>Make sure you have a stable internet connection</li>
          </ul>
        </div>

        <button id="start-exam" class="btn">Start Examination</button>
      </div>

      <!-- Exam Screen -->
      <div id="exam-screen" class="hidden">
        <div class="timer">
          <i class="fas fa-clock"></i>
          <span id="time-remaining">30:00</span>
        </div>

        <div class="progress-container">
          <div class="progress-bar">
            <div id="progress" class="progress"></div>
          </div>
        </div>

        <form id="exam-form">
          <!-- Science Section -->
          <h2 class="section-title">SCIENCE</h2>

          <div class="question-card">
            <div class="question-number">Question 1</div>
            <div class="question-text">
              Which part of the cell controls all its activities?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q1" value="a" /> a) Cytoplasm
              </label>
              <label class="option">
                <input type="radio" name="q1" value="b" /> b) Nucleus
              </label>
              <label class="option">
                <input type="radio" name="q1" value="c" /> c) Ribosome
              </label>
              <label class="option">
                <input type="radio" name="q1" value="d" /> d) Golgi Apparatus
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 2</div>
            <div class="question-text">
              The cell wall is found in both plant and animal cells.
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q2" value="true" /> True
              </label>
              <label class="option">
                <input type="radio" name="q2" value="false" /> False
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 3</div>
            <div class="question-text">
              Which organelle is called the "powerhouse" of the cell?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q3" value="a" /> a) Ribosome
              </label>
              <label class="option">
                <input type="radio" name="q3" value="b" /> b) Mitochondria
              </label>
              <label class="option">
                <input type="radio" name="q3" value="c" /> c) Lysosome
              </label>
              <label class="option">
                <input type="radio" name="q3" value="d" /> d) Vacuole
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 4</div>
            <div class="question-text">
              Which of these is found only in plant cells but not in animal
              cells?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q4" value="a" /> a) Vacuole
              </label>
              <label class="option">
                <input type="radio" name="q4" value="b" /> b) Chloroplast
              </label>
              <label class="option">
                <input type="radio" name="q4" value="c" /> c) Lysosome
              </label>
              <label class="option">
                <input type="radio" name="q4" value="d" /> d) Ribosome
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 5</div>
            <div class="question-text">
              Which organelle packages and distributes substances in the cell?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q5" value="a" /> a) Ribosome
              </label>
              <label class="option">
                <input type="radio" name="q5" value="b" /> b) Golgi Apparatus
              </label>
              <label class="option">
                <input type="radio" name="q5" value="c" /> c) Mitochondria
              </label>
              <label class="option">
                <input type="radio" name="q5" value="d" /> d) Cytoplasm
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 6</div>
            <div class="question-text">
              Which part of the plant cell makes food through photosynthesis?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q6" value="a" /> a) Cell Wall
              </label>
              <label class="option">
                <input type="radio" name="q6" value="b" /> b) Vacuole
              </label>
              <label class="option">
                <input type="radio" name="q6" value="c" /> c) Chloroplast
              </label>
              <label class="option">
                <input type="radio" name="q6" value="d" /> d) Nucleus
              </label>
            </div>
          </div>

          <!-- Mathematics Section -->
          <h2 class="section-title">MATHEMATICS</h2>

          <div class="question-card">
            <div class="question-number">Question 7</div>
            <div class="question-text">Simplify: 7x – 4x – x</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q7" value="a" /> a) 2x
              </label>
              <label class="option">
                <input type="radio" name="q7" value="b" /> b) 3x
              </label>
              <label class="option">
                <input type="radio" name="q7" value="c" /> c) –2x
              </label>
              <label class="option">
                <input type="radio" name="q7" value="d" /> d) –3x
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 8</div>
            <div class="question-text">
              If Kofi's age is x and Maame is 4 years older, which expression
              represents Maame's age?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q8" value="a" /> a) x – 4
              </label>
              <label class="option">
                <input type="radio" name="q8" value="b" /> b) x + 4
              </label>
              <label class="option">
                <input type="radio" name="q8" value="c" /> c) 4x
              </label>
              <label class="option">
                <input type="radio" name="q8" value="d" /> d) x ÷ 4
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 9</div>
            <div class="question-text">Simplify: (12x³y²) ÷ (16xy⁴)</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q9" value="a" /> a) ¾x²/y²
              </label>
              <label class="option">
                <input type="radio" name="q9" value="b" /> b) ¾x²y²
              </label>
              <label class="option">
                <input type="radio" name="q9" value="c" /> c) ¾x²y⁻²
              </label>
              <label class="option">
                <input type="radio" name="q9" value="d" /> d) x²/y²
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 10</div>
            <div class="question-text">
              The area of a rectangle is given as A = tq. If the length is 3x
              and the width is 2y, what is the area?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q10" value="a" /> a) 5xy
              </label>
              <label class="option">
                <input type="radio" name="q10" value="b" /> b) 6xy
              </label>
              <label class="option">
                <input type="radio" name="q10" value="c" /> c) 3x + 2y
              </label>
              <label class="option">
                <input type="radio" name="q10" value="d" /> d) 6x²y²
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 11</div>
            <div class="question-text">Simplify: 5x + 4 – 9y + 3x + 2y – 7</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q11" value="a" /> a) 8x – 7y – 3
              </label>
              <label class="option">
                <input type="radio" name="q11" value="b" /> b) 8x – 11y – 3
              </label>
              <label class="option">
                <input type="radio" name="q11" value="c" /> c) 8x – 7y + 3
              </label>
              <label class="option">
                <input type="radio" name="q11" value="d" /> d) 2x – 7y – 3
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 12</div>
            <div class="question-text">
              Agbolosu and Tetteh share GH₵400. If Agbolosu's share is x, what
              is Tetteh's share?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q12" value="a" /> a) 400 – x
              </label>
              <label class="option">
                <input type="radio" name="q12" value="b" /> b) 400 + x
              </label>
              <label class="option">
                <input type="radio" name="q12" value="c" /> c) 200x
              </label>
              <label class="option">
                <input type="radio" name="q12" value="d" /> d) x – 400
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 13</div>
            <div class="question-text">Simplify: (7x + 4x – 2x) ÷ 3x</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q13" value="a" /> a) 3
              </label>
              <label class="option">
                <input type="radio" name="q13" value="b" /> b) 2x
              </label>
              <label class="option">
                <input type="radio" name="q13" value="c" /> c) 3x
              </label>
              <label class="option">
                <input type="radio" name="q13" value="d" /> d) 5
              </label>
            </div>
          </div>

          <!-- English Section -->
          <h2 class="section-title">ENGLISH</h2>

          <div class="question-card">
            <div class="question-number">Question 14</div>
            <div class="question-text">
              Which of the following is a proper noun?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q14" value="a" /> a) boy
              </label>
              <label class="option">
                <input type="radio" name="q14" value="b" /> b) school
              </label>
              <label class="option">
                <input type="radio" name="q14" value="c" /> c) Ghana
              </label>
              <label class="option">
                <input type="radio" name="q14" value="d" /> d) book
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 15</div>
            <div class="question-text">
              Which pronoun correctly replaces the underlined noun?
              <span style="text-decoration: underline">Kwame</span> is reading a
              book. → ______ is reading a book.
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q15" value="a" /> a) It
              </label>
              <label class="option">
                <input type="radio" name="q15" value="b" /> b) He
              </label>
              <label class="option">
                <input type="radio" name="q15" value="c" /> c) They
              </label>
              <label class="option">
                <input type="radio" name="q15" value="d" /> d) She
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 16</div>
            <div class="question-text">What is the plural of "child"?</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q16" value="a" /> a) childs
              </label>
              <label class="option">
                <input type="radio" name="q16" value="b" /> b) children
              </label>
              <label class="option">
                <input type="radio" name="q16" value="c" /> c) childes
              </label>
              <label class="option">
                <input type="radio" name="q16" value="d" /> d) childs'
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 17</div>
            <div class="question-text">
              Which word is the adjective in this sentence? "The tall man walked
              quickly."
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q17" value="a" /> a) tall
              </label>
              <label class="option">
                <input type="radio" name="q17" value="b" /> b) walked
              </label>
              <label class="option">
                <input type="radio" name="q17" value="c" /> c) man
              </label>
              <label class="option">
                <input type="radio" name="q17" value="d" /> d) quickly
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 18</div>
            <div class="question-text">"Mine" is a relative pronoun.</div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q18" value="true" /> True
              </label>
              <label class="option">
                <input type="radio" name="q18" value="false" /> False
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 19</div>
            <div class="question-text">
              Which of the following is an interrogative pronoun?
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q19" value="a" /> a) mine
              </label>
              <label class="option">
                <input type="radio" name="q19" value="b" /> b) who
              </label>
              <label class="option">
                <input type="radio" name="q19" value="c" /> c) myself
              </label>
              <label class="option">
                <input type="radio" name="q19" value="d" /> d) these
              </label>
            </div>
          </div>

          <div class="question-card">
            <div class="question-number">Question 20</div>
            <div class="question-text">
              Which conjunction best combines these sentences: "I was tired. I
              continued working."
            </div>
            <div class="options">
              <label class="option">
                <input type="radio" name="q20" value="a" /> a) because
              </label>
              <label class="option">
                <input type="radio" name="q20" value="b" /> b) but
              </label>
              <label class="option">
                <input type="radio" name="q20" value="c" /> c) and
              </label>
              <label class="option">
                <input type="radio" name="q20" value="d" /> d) so
              </label>
            </div>
          </div>

          <div style="text-align: center; margin-top: 30px">
            <button type="submit" class="btn btn-success">Submit Exam</button>
          </div>
        </form>
      </div>

      <!-- Result Screen -->
      <div id="result-screen" class="card result-card hidden">
        <h1>Exam Completed!</h1>
        <div class="score" id="score-display">0/20 (0%)</div>
        <div class="score-message" id="score-message">
          Thank you for completing the exam.
        </div>
        <p>Your results have been submitted to your teacher.</p>
        <button id="restart-exam" class="btn">Take Exam Again</button>
      </div>

      <!-- Animated Score Overlay -->
      <div id="score-overlay" class="score-overlay">
        <div class="score-circle-container">
          <div class="score-circle" id="score-circle">
            <div class="score-circle-content">
              <div class="score-percentage" id="score-percentage">0%</div>
              <div class="score-label">Your Score</div>
              <div class="score-fraction" id="score-fraction">0/20</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="container">
        <p>Made with ❤️ by Kenzy</p>
        <p>© 2025 EduHub Online Examination Platform. All rights reserved.</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Mouse tracking for interactive effects
        document.addEventListener("mousemove", function (e) {
          const cards = document.querySelectorAll(".question-card, .option");
          cards.forEach((card) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            card.style.setProperty("--mouse-x", x + "px");
            card.style.setProperty("--mouse-y", y + "px");
          });
        });

        // DOM Elements
        const welcomeScreen = document.getElementById("welcome-screen");
        const examScreen = document.getElementById("exam-screen");
        const resultScreen = document.getElementById("result-screen");
        const scoreOverlay = document.getElementById("score-overlay");
        const scoreCircle = document.getElementById("score-circle");
        const scorePercentage = document.getElementById("score-percentage");
        const scoreFraction = document.getElementById("score-fraction");
        const startExamBtn = document.getElementById("start-exam");
        const examForm = document.getElementById("exam-form");
        const restartExamBtn = document.getElementById("restart-exam");
        const timeRemainingElement = document.getElementById("time-remaining");
        const progressBar = document.getElementById("progress");
        const scoreDisplay = document.getElementById("score-display");
        const scoreMessage = document.getElementById("score-message");

        // Timer variables
        let examDuration = 30 * 60; // 30 minutes in seconds
        let timeRemaining = examDuration;
        let examStartTime;
        let timerInterval;

        // Correct answers
        const correctAnswers = {
          q1: "b", // Nucleus
          q2: "false", // False (cell wall is only in plant cells)
          q3: "b", // Mitochondria
          q4: "b", // Chloroplast
          q5: "b", // Golgi Apparatus
          q6: "c", // Chloroplast
          q7: "a", // 2x
          q8: "b", // x + 4
          q9: "a", // ¾x²/y²
          q10: "b", // 6xy
          q11: "a", // 8x – 7y – 3
          q12: "a", // 400 – x
          q13: "a", // 3
          q14: "c", // Ghana
          q15: "b", // He
          q16: "b", // children
          q17: "a", // tall
          q18: "false", // False
          q19: "b", // who
          q20: "b", // but
        };

        // Question text for email report
        const questionTexts = {
          q1: "Which part of the cell controls all its activities?",
          q2: "The cell wall is found in both plant and animal cells.",
          q3: "Which organelle is called the 'powerhouse' of the cell?",
          q4: "Which of these is found only in plant cells but not in animal cells?",
          q5: "Which organelle packages and distributes substances in the cell?",
          q6: "Which part of the plant cell makes food through photosynthesis?",
          q7: "Simplify: 7x – 4x – x",
          q8: "If Kofi's age is x and Maame is 4 years older, which expression represents Maame's age?",
          q9: "Simplify: (12x³y²) ÷ (16xy⁴)",
          q10: "The area of a rectangle is given as A = tq. If the length is 3x and the width is 2y, what is the area?",
          q11: "Simplify: 5x + 4 – 9y + 3x + 2y – 7",
          q12: "Agbolosu and Tetteh share GH₵400. If Agbolosu's share is x, what is Tetteh's share?",
          q13: "Simplify: (7x + 4x – 2x) ÷ 3x",
          q14: "Which of the following is a proper noun?",
          q15: "Which pronoun correctly replaces the underlined noun? Kwame is reading a book. → ______ is reading a book.",
          q16: "What is the plural of 'child'?",
          q17: "Which word is the adjective in this sentence? 'The tall man walked quickly.'",
          q18: "'Mine' is a relative pronoun.",
          q19: "Which of the following is an interrogative pronoun?",
          q20: "Which conjunction best combines these sentences: 'I was tired. I continued working.'",
        };

        // Option text for email report
        const optionTexts = {
          q1: {
            a: "a) Cytoplasm",
            b: "b) Nucleus",
            c: "c) Ribosome",
            d: "d) Golgi Apparatus",
          },
          q2: { true: "True", false: "False" },
          q3: {
            a: "a) Ribosome",
            b: "b) Mitochondria",
            c: "c) Lysosome",
            d: "d) Vacuole",
          },
          q4: {
            a: "a) Vacuole",
            b: "b) Chloroplast",
            c: "c) Lysosome",
            d: "d) Ribosome",
          },
          q5: {
            a: "a) Ribosome",
            b: "b) Golgi Apparatus",
            c: "c) Mitochondria",
            d: "d) Cytoplasm",
          },
          q6: {
            a: "a) Cell Wall",
            b: "b) Vacuole",
            c: "c) Chloroplast",
            d: "d) Nucleus",
          },
          q7: { a: "a) 2x", b: "b) 3x", c: "c) –2x", d: "d) –3x" },
          q8: { a: "a) x – 4", b: "b) x + 4", c: "c) 4x", d: "d) x ÷ 4" },
          q9: { a: "a) ¾x²/y²", b: "b) ¾x²y²", c: "c) ¾x²y⁻²", d: "d) x²/y²" },
          q10: { a: "a) 5xy", b: "b) 6xy", c: "c) 3x + 2y", d: "d) 6x²y²" },
          q11: {
            a: "a) 8x – 7y – 3",
            b: "b) 8x – 11y – 3",
            c: "c) 8x – 7y + 3",
            d: "d) 2x – 7y – 3",
          },
          q12: {
            a: "a) 400 – x",
            b: "b) 400 + x",
            c: "c) 200x",
            d: "d) x – 400",
          },
          q13: { a: "a) 3", b: "b) 2x", c: "c) 3x", d: "d) 5" },
          q14: { a: "a) boy", b: "b) school", c: "c) Ghana", d: "d) book" },
          q15: { a: "a) It", b: "b) He", c: "c) They", d: "d) She" },
          q16: {
            a: "a) childs",
            b: "b) children",
            c: "c) childes",
            d: "d) childs'",
          },
          q17: { a: "a) tall", b: "b) walked", c: "c) man", d: "d) quickly" },
          q18: { true: "True", false: "False" },
          q19: { a: "a) mine", b: "b) who", c: "c) myself", d: "d) these" },
          q20: { a: "a) because", b: "b) but", c: "c) and", d: "d) so" },
        };

        // Check if exam was already started
        function checkExistingExam() {
          const savedStartTime = localStorage.getItem("examStartTime");
          if (savedStartTime) {
            const startTime = new Date(savedStartTime);
            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);

            if (elapsedTime < examDuration) {
              // Exam is in progress
              examStartTime = startTime;
              timeRemaining = examDuration - elapsedTime;
              startExam();
            } else {
              // Exam time has expired
              localStorage.removeItem("examStartTime");
            }
          }
        }

        // Start the exam
        function startExam() {
          welcomeScreen.classList.add("hidden");
          examScreen.classList.remove("hidden");

          // If it's a new exam, save start time
          if (!examStartTime) {
            examStartTime = new Date();
            localStorage.setItem("examStartTime", examStartTime);
          }

          // Start timer
          updateTimerDisplay();
          timerInterval = setInterval(updateTimer, 1000);

          // Restore saved answers if any
          restoreAnswers();

          // Add event listeners to options
          const options = document.querySelectorAll(".option");
          options.forEach((option) => {
            option.addEventListener("click", function () {
              const radio = this.querySelector('input[type="radio"]');
              if (radio) {
                radio.checked = true;

                // Update visual selection
                const questionCard = this.closest(".question-card");
                const allOptions = questionCard.querySelectorAll(".option");
                allOptions.forEach((opt) => opt.classList.remove("selected"));
                this.classList.add("selected");

                // Save answer to localStorage
                saveAnswers();
                updateProgress();
              }
            });
          });

          updateProgress();
        }

        // Update timer
        function updateTimer() {
          timeRemaining--;
          updateTimerDisplay();

          if (timeRemaining <= 0) {
            clearInterval(timerInterval);
            submitExam(true); // Auto-submit when time runs out
          }
        }

        // Update timer display
        function updateTimerDisplay() {
          const minutes = Math.floor(timeRemaining / 60);
          const seconds = timeRemaining % 60;
          timeRemainingElement.textContent = `${minutes}:${
            seconds < 10 ? "0" : ""
          }${seconds}`;

          // Update timer styling based on time remaining
          const timerElement = document.querySelector(".timer");
          timerElement.classList.remove("warning", "danger");

          if (timeRemaining <= 300) {
            // 5 minutes or less
            timerElement.classList.add("danger");
          } else if (timeRemaining <= 900) {
            // 15 minutes or less
            timerElement.classList.add("warning");
          }
        }

        // Update progress bar
        function updateProgress() {
          const totalQuestions = Object.keys(correctAnswers).length;
          const answeredQuestions = document.querySelectorAll(
            'input[type="radio"]:checked'
          ).length;
          const progressPercentage = (answeredQuestions / totalQuestions) * 100;
          progressBar.style.width = `${progressPercentage}%`;
        }

        // Save answers to localStorage
        function saveAnswers() {
          const formData = new FormData(examForm);
          const answers = {};

          for (let [key, value] of formData.entries()) {
            answers[key] = value;
          }

          localStorage.setItem("examAnswers", JSON.stringify(answers));
        }

        // Restore answers from localStorage
        function restoreAnswers() {
          const savedAnswers = localStorage.getItem("examAnswers");
          if (savedAnswers) {
            const answers = JSON.parse(savedAnswers);

            for (let [questionId, answer] of Object.entries(answers)) {
              const radio = document.querySelector(
                `input[name="${questionId}"][value="${answer}"]`
              );
              if (radio) {
                radio.checked = true;

                // Update visual selection
                const option = radio.closest(".option");
                if (option) {
                  option.classList.add("selected");
                }
              }
            }

            updateProgress();
          }
        }

        // Submit exam
        function submitExam(isAutoSubmit = false) {
          clearInterval(timerInterval);

          const formData = new FormData(examForm);
          const answers = {};

          for (let [key, value] of formData.entries()) {
            answers[key] = value;
          }

          // Calculate score
          let score = 0;
          const results = [];

          for (let [questionId, correctAnswer] of Object.entries(
            correctAnswers
          )) {
            const studentAnswer = answers[questionId];
            const isCorrect = studentAnswer === correctAnswer;

            if (isCorrect) {
              score++;
            }

            results.push({
              questionId,
              question: questionTexts[questionId],
              studentAnswer: studentAnswer || "Not answered",
              correctAnswer: optionTexts[questionId][correctAnswer],
              isCorrect,
            });
          }

          const percentage = Math.round(
            (score / Object.keys(correctAnswers).length) * 100
          );

          // Display results to student (this includes animation)
          displayResults(score, percentage);

          // Send detailed results to teacher after animation
          setTimeout(() => {
            sendResultsToTeacher(results, score, percentage, isAutoSubmit);
          }, 5000);

          // Clear localStorage
          localStorage.removeItem("examStartTime");
          localStorage.removeItem("examAnswers");
        }

        // Display results to student
        function displayResults(score, percentage) {
          // Show animated overlay first
          showAnimatedScore(score, percentage);

          // Set message based on score (for later display)
          if (percentage >= 80) {
            scoreMessage.textContent =
              "Excellent work! You've mastered this material.";
          } else if (percentage >= 60) {
            scoreMessage.textContent =
              "Good job! You have a solid understanding of the material.";
          } else if (percentage >= 40) {
            scoreMessage.textContent =
              "Nice effort! Keep studying to improve your knowledge.";
          } else {
            scoreMessage.textContent =
              "Keep practicing! Review the material and try again.";
          }
        }

        // Show animated score overlay
        function showAnimatedScore(score, percentage) {
          // Update overlay content
          scorePercentage.textContent = `${percentage}%`;
          scoreFraction.textContent = `${score}/${
            Object.keys(correctAnswers).length
          }`;

          // Show overlay
          scoreOverlay.classList.add("active");

          // Create confetti for high scores
          if (percentage >= 70) {
            createConfetti();
          }

          // Animate circle after a short delay
          setTimeout(() => {
            // Set CSS variable for animation
            scoreCircle.style.setProperty("--percentage", percentage);
            scoreCircle.classList.add("animate");
          }, 500);

          // Hide overlay and show results after animation
          setTimeout(() => {
            scoreOverlay.classList.remove("active");
            scoreCircle.classList.remove("animate");

            // Show regular result screen
            examScreen.classList.add("hidden");
            resultScreen.classList.remove("hidden");
            scoreDisplay.textContent = `${score}/${
              Object.keys(correctAnswers).length
            } (${percentage}%)`;
          }, 4000);
        }

        // Create confetti effect
        function createConfetti() {
          const colors = [
            "#6366f1",
            "#818cf8",
            "#a5b4fc",
            "#10b981",
            "#f59e0b",
          ];

          for (let i = 0; i < 50; i++) {
            setTimeout(() => {
              const confetti = document.createElement("div");
              confetti.className = "confetti";
              confetti.style.left = Math.random() * 100 + "%";
              confetti.style.backgroundColor =
                colors[Math.floor(Math.random() * colors.length)];
              confetti.style.animationDelay = Math.random() * 2 + "s";
              confetti.style.animationDuration = Math.random() * 3 + 2 + "s";
              confetti.style.animation = "confetti-fall linear forwards";

              scoreOverlay.appendChild(confetti);

              // Remove confetti after animation
              setTimeout(() => {
                confetti.remove();
              }, 5000);
            }, i * 100);
          }
        }

        // Send results to teacher via Formspree
        function sendResultsToTeacher(
          results,
          score,
          percentage,
          isAutoSubmit
        ) {
          // Create email content
          let emailContent = `EduHub Exam Results\n\n`;
          emailContent += `Student Score: ${score}/${
            Object.keys(correctAnswers).length
          } (${percentage}%)\n`;
          emailContent += `Submission Type: ${
            isAutoSubmit ? "Auto-submitted (time expired)" : "Manual submission"
          }\n`;
          emailContent += `Submission Time: ${new Date().toLocaleString()}\n\n`;
          emailContent += `Detailed Results:\n\n`;

          results.forEach((result) => {
            emailContent += `Question ${result.questionId.substring(1)}: ${
              result.question
            }\n`;
            emailContent += `Student Answer: ${result.studentAnswer}\n`;
            emailContent += `Correct Answer: ${result.correctAnswer}\n`;
            emailContent += `Result: ${
              result.isCorrect ? "Correct" : "Incorrect"
            }\n\n`;
          });

          // Create a hidden form and submit it
          const form = document.createElement("form");
          form.method = "POST";
          form.action = "https://formspree.io/f/xjkeppyg";

          const input = document.createElement("input");
          input.type = "hidden";
          input.name = "message";
          input.value = emailContent;

          form.appendChild(input);
          document.body.appendChild(form);
          form.submit();
          document.body.removeChild(form);
        }

        // Restart exam
        function restartExam() {
          resultScreen.classList.add("hidden");
          scoreOverlay.classList.remove("active");
          scoreCircle.classList.remove("animate");
          welcomeScreen.classList.remove("hidden");

          // Reset form
          examForm.reset();

          // Remove visual selection
          const options = document.querySelectorAll(".option");
          options.forEach((option) => {
            option.classList.remove("selected");
          });

          // Reset timer
          timeRemaining = examDuration;
          examStartTime = null;
          updateTimerDisplay();

          // Reset progress bar
          progressBar.style.width = "0%";

          // Reset timer styling
          const timerElement = document.querySelector(".timer");
          timerElement.classList.remove("warning", "danger");
        }

        // Event listeners
        startExamBtn.addEventListener("click", startExam);
        examForm.addEventListener("submit", function (e) {
          e.preventDefault();
          submitExam();
        });
        restartExamBtn.addEventListener("click", restartExam);

        // Check for existing exam on page load
        checkExistingExam();
      });
    </script>
  </body>
</html>
